CREATE TABLE Usuario (
    ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY,
    Nombre VARCHAR(255) NOT NULL,
    Apellido VARCHAR(255) NOT NULL,
    Correo VARCHAR(350) NOT NULL UNIQUE, 
    Telefono VARCHAR(15) NOT NULL,
    Contraseña VARCHAR(100) NOT NULL,
    Estado INT NOT NULL,
    EsAdmin BOOLEAN NOT NULL,
    EsAnfitrion BOOLEAN NOT NULL,
    Foto VARCHAR(500) NULL
);

CREATE TABLE TipoPlato (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  Nombre VARCHAR(100) NOT NULL,
  Descripcion VARCHAR (150) NOT NULL,
  IdUsuario INT NOT NULL,
  CONSTRAINT fk_usuario_tipo_plato FOREIGN KEY (IdUsuario) REFERENCES Usuario (ID)
);

CREATE TABLE Plato (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  Estado INT NOT NULL,
  Descripcion VARCHAR (150) NOT NULL,
  Nombre VARCHAR(100) NOT NULL,
  Foto VARCHAR(255),
  IdUsuario INT NOT NULL,
  IdTipoPlato INT NOT NULL,
  CONSTRAINT fk_usuario_plato FOREIGN KEY (IdUsuario) REFERENCES Usuario (ID),
  CONSTRAINT fk_TipoPlato FOREIGN KEY (IdTipoPlato) REFERENCES TipoPlato (ID)
);

CREATE TABLE Servicio (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  Nombre VARCHAR(100) NOT NULL,
  Descripcion VARCHAR (150) NOT NULL,
  FechaInicio VARCHAR(100) NOT NULL,
  FechaFin VARCHAR(100) NOT NULL,
  Cupo INT NOT NULL,
  Precio FLOAT NOT NULL,
  Foto VARCHAR(255) NOT NULL
);

CREATE TABLE Reserva (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  FechaReserva VARCHAR(100) NOT NULL,
  FechaServicio VARCHAR(100) NOT NULL,
  Cupo INT NOT NULL,
  Observacion VARCHAR(40) NOT NULL,
  Estado INT NOT NULL,
  Total FLOAT NOT NULL,
  IdUsuario INT NOT NULL,
  IdServicio INT NOT NULL,
  CONSTRAINT fk_usuario_reserva FOREIGN KEY (IdUsuario) REFERENCES Usuario (ID),
  CONSTRAINT fk_servicio_reserva FOREIGN KEY (IdServicio) REFERENCES Servicio (ID)
);

CREATE TABLE ServicioPlato (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  IdServicio INT NOT NULL,
  IdPlato INT NOT NULL,
  CONSTRAINT fk_servicio_platos FOREIGN KEY (IdServicio) REFERENCES Servicio (ID),
  CONSTRAINT fk_plato_servicios FOREIGN KEY (IdPlato) REFERENCES Plato (ID)
);

CREATE TABLE Consumo (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  Estado INT NOT NULL,
  Total FLOAT NOT NULL,
  Fecha VARCHAR(100) NOT NULL,
  IdReserva INT NOT NULL,
  CONSTRAINT fk_reserva_consumo FOREIGN KEY (IdReserva) REFERENCES Reserva (ID)
);

CREATE TABLE Producto (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  Nombre VARCHAR(100) NOT NULL,
  Descripcion VARCHAR (100) NOT NULL,
  Foto VARCHAR(255),
  Precio FLOAT NOT NULL,
  Stock INT NOT NULL,
  Estado INT NOT NULL
);

CREATE TABLE DetalleConsumo (
  ID INT GENERATED ALWAYS AS IDENTITY PRIMARY KEY NOT NULL,
  Cantidad INT NOT NULL,
  SubTotal FLOAT NOT NULL,
  IdProducto INT NOT NULL,
  IdConsumo INT NOT NULL,
  CONSTRAINT fk_producto_detalleconsumo FOREIGN KEY (IdProducto) REFERENCES Producto (ID),
  CONSTRAINT fk_consumo_detalleconsumo FOREIGN KEY (IdConsumo) REFERENCES Consumo (ID)
);